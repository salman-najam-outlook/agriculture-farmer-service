<!DOCTYPE html>
<html lang="<%= lang %>">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="" />
  <meta name="author" content="Complicance Report" />
  <meta name="generator" content="Hugo 0.84.0" />
  <title>EUDR Due Diligence Final Report</title>
  <link href="https://getbootstrap.com/docs/5.0/dist/css/bootstrap.min.css" rel="stylesheet" />

  <style>
    * {
      margin: 0;
      padding: 0;
    }

    html {
      print-color-adjust: exact;
      -webkit-print-color-adjust: exact;
    }

    body {
      font-family: "Poppins", sans-serif;
    }

    .nav-image {
      width: 300px;
      height: 49.498px;
    }

    .nav-image img {
      height: auto;
      width: 80%;
    }

    .top_title {
      width: 416px;
      height: 70px;
      background-color: #117443;
      color: #fff;
      font-size: 18px;
      font-weight: 600;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 8px;
    }

    .location_section {
      background: rgba(0, 0, 0, 0.03);
      padding: 30px 20px 30px 20px;
    }

    .border-right {
      height: 100px;
      width: 1px;
      background: rgba(0, 0, 0, 0.05);
    }

    .map_image {
      padding: 20px;
    }

    .map_image img {
      width: 100%;
    }

    thead {
      padding: 20px;
      border-style: hidden;
    }

    .borderless td,
    .borderless th {
      border: none;
    }

    table td {
      border: 0 !important;
    }

    .color-box {
      width: 20px;
      height: 20px;
      flex-shrink: 0;
      border-radius: 5px;
      margin-left: 10px;
    }

    .dp_btn {
      border: 1px solid #ffb443;
      border-radius: 70px;
      color: #ffb443;
      padding: 6px 20px;
      width: fit-content;
      height: 34px;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .footer .blockchain_assessment {
      font-size: 20px;
    }

    .footer .blockchain_validation {
      font-size: 14px;
    }

    .footer .hash_div {
      border-radius: 8px;
      color: white;
      width: fit-content;
      padding: 0 20px;
      height: 60px;
      flex-shrink: 0;
      border-radius: 5.833px;
      background: #018a54;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: auto;
      font-size: 12px;
    }

    .footer .copy_link {
      font-size: 10px;
    }

    @media (max-width: 767px) {
      .footer .blockchain_assessment {
        font-size: 20px;
      }

      .footer .blockchain_validation {
        font-size: 16px;
      }

      .footer .hash_div {
        width: 100%;
        font-size: 12px;
      }

      .footer .copy_link {
        font-size: 12px;
      }
    }

    .d-flex {
      display: flex;
    }

    mr-5 {
      margin-right: 5px;
    }

    mt-10 {
      margin-top: 10
    }

    mb-10 {
      margin-bottom: 10;
    }

    .font-weight-bold {
      font-weight: bold;
    }

    .mb-20 {
      margin-bottom: 20px;
    }

    body {
      margin: auto;
      width: 794px;
    }

    .mb-50 {
      margin-bottom: 50px;
    }

    .space-between {
      justify-content: space-between;
    }

    .flex-count {
      flex: 1;
    }

    .flex-basic {
      flex-basis: 33%;
    }

    label {
      margin-bottom: 10px;
    }

    .bgr {
      background-color: #ddd;
    }

    .top-section,
    .middle-section,
    .third-section,
    .production-place {
      background-color: #fff;
    }

    .justify-space-between {
      justify-content: space-between;
    }

    .p-20 {
      padding: 20px;
    }
    table thead tr {
      background-color: #FFB443;
      text-align: start;
      vertical-align: top;
      font-size: 14px;
    }
    .font-sz {
      font-size:14px;
    }

    .status-box{
      padding: 4px 20px;
      border-radius: 16px;
    }

    .status-box-pending {
      background: #E8E8E8;
      border: 1px solid #000000;
    }
    .status-box-upload-to-eu{
      background: #D0E6FE;
      border: 1px solid #002287
    }

    .status-box-under-review{
      border: 1px solid #B56D01;
      background: #B56D01;
    }

    .status-box-non-complaint{
      background: #FDEBEB;
      border: 1px solid #DA3D3D
    }

    .status-box-mitigation-required{
      background: #FFF7EC;
      border: 1px solid #FFA826
    }

    .status-box-complaint {
      background: #C1FFE7;
      border: 1px solid #489E16
    }

    .production-status{
      padding: 4px 15px;
      border-radius: 14px;
    }

    .tick-sign{
      height: 20px;
      width: 20px;
      border-radius: 3px;
    }

    .production-status-approve {
      background: #E2FFF4;
      border: 1px solid #00BD73
    }

    .production-status-reject {
      background: #FFCEB3;
      border: 1px solid #F06B20
    }

    .production-status-high{
      background: #FF8F8F;
      border: 1px solid #8B0000;
    }

    .production-status-low{
      background: #FFFCEC;
      border: 1px solid #F49238
    }

    .production-status-medium{
      background: #FFCEB3;
      border: 1px solid #F06B20
    }

    .mb-400{
      margin-bottom: 350px;
    }

  </style>
</head>

<body>
  <section class="bgr">
    <nav class="navbar navbar-expand-md mb-50">
      <div class="container-fluid d-flex align-items-center justify-space-between">
        <div class="nav-image">
          <img src="https://dimitra.io/wp-content/themes/dimitra/assets/imgs/dimitralogo2023.svg" alt="dimitra logo" />
        </div>

        <div class="top_title">
          <%= t('message.deforestation.dueDiligenceFinalReport', { lang }) %>
        </div>
      </div>
    </nav>
    <main class="container-fluid mb-20 p-20  font-sz">
      <div class="top-section p-20 mb-50">
        <div class="data-section-row d-flex mb-20 space-between">
          <div class="attr">
            <label><%= t('message.deforestation.internalReferenceNo', { lang }) %></label>
            <p class="font-weight-bold">
              <%= report.internalReferenceNumber || 'NA' %>
            </p>
          </div>

          <div class="attr">
            <label><%= t('message.deforestation.eudrReferenceNo', { lang }) %></label>
            <p class="font-weight-bold"> 
              <%= report.EUDRReferenceNumber || 'NA' %>
            </p>
          </div>

          <div class="attr">
            <label><%= t('message.activity', { lang }) %></label>
            <p class="font-weight-bold"> <%= report.activity || 'NA' %> </p>
          </div>

          <div class="attr">
            <label><%= t('message.activityCountry', { lang }) %></label>
            <p class="font-weight-bold"> <%= report.countryOfActivity || 'NA' %> </p>
          </div>
        </div>


        <div class="data-section-row d-flex mb-20">
          <div class="attr flex-basic">
            <label><%= t('message.entryCountry', { lang }) %></label>
            <p class="font-weight-bold"> <%= report.countryOfEntry || 'NA' %> </p>
          </div>

          <div class="attr flex-basic">
            <label><%= t('message.deforestation.diligenceReportStatus', { lang }) %></label>
            <% if(report.status == 'Compliant' || report.status == 'compliant') { %> 
            <span  class="status-box-complaint status-box">
              <%= t('message.compliant', { lang }) %>
            </span>
            <% } else if(report.status == 'Non-Compliant' || report.status == 'non-compliant') { %>
              <div>
                <span  class="status-box-non-complaint status-box">
                  <%= t('message.nonCompliant', { lang }) %>
                </span>
              </div>
            <% } else if(report.status == 'Pending') { %>
              <span  class="status-box-pending status-box">
                <%= t('message.pending', { lang }) %>
              </span>
            <% } else { %>
              <span  class="status-box-pending status-box">
                <%= report.status || 'NA' %>
              </span>
            <% } %>
          </div>
        </div>


        <% if(report.operator) { %>
        <div class="operator-wraper">
          <div class="heading mb-10">
            <h4><%= t('message.operatorData', { lang }) %></h4>
          </div>
          <div class="data-section-row d-flex mb-20">
            <div class="attr flex-basic">
              <label><%= t('message.name', { lang }) %></label>
              <p class="font-weight-bold"> <%= report.operator.firstName  %>  <%= report.operator.lastName  %> </p>
            </div>
  
            <div class="attr flex-basic">
              <label><%= t('message.country', { lang }) %></label>
              <p class="font-weight-bold"> <%= report.operator.countryId || 'NA' %> </p>
            </div>
  
            <div class="attr flex-basic">
              <label><%= t('message.isoCode', { lang }) %></label>
              <p class="font-weight-bold"> <%= report.operator.countryCode || 'NA' %> </p>
            </div>
  
            <div class="attr flex-basic">
              <label><%= t('message.eoriNo', { lang }) %></label>
              <p class="font-weight-bold"> <%= report.operator.eori_number || 'NA' %> </p>
            </div>
          </div>
        </div>
        <% } %>
        

        <% if(report.supplier) { %>
        <div class="supplier-wraper">
          <div class="heading mb-10">
            <h4><%= t('message.deforestation.supplierData', { lang }) %></h4>
          </div>
          <div class="data-section-row d-flex mb-20">
            <div class="attr flex-basic">
              <label><%= t('message.name', { lang }) %></label>
              <p class="font-weight-bold"> <%= report.supplier.firstName  %>  <%= report.supplier.lastName  %> </p>
            </div>
  
            <div class="attr flex-basic">
              <label><%= t('message.country', { lang }) %></label>
              <p class="font-weight-bold"> <%= report.supplier.countryId || 'NA' %> </p>
            </div>
  
            <div class="attr flex-basic">
              <label><%= t('message.isoCode', { lang }) %></label>
              <p class="font-weight-bold"> <%= report.supplier.countryCode || 'NA' %> </p>
            </div>
  
            <div class="attr flex-basic">
              <label><%= t('message.eoriNo', { lang }) %></label>
              <p class="font-weight-bold"> <%= report.supplier.eori_number || 'NA' %> </p>
            </div>
          </div>
        </div>
        <%  } %>

      </div>


      <div class="middle-section p-20 mb-400">
        <h4><%= t('message.reportSummary', { lang }) %></h4>
        <div class="data-section-row d-flex mb-20 space-between">
          <div class="attr">
            <label><%= t('message.totalPolygon', { lang }) %></label>
            <p class="font-weight-bold"> <%= totalPolygon  %> </p>
          </div>

          <div class="attr">
            <label><%= t('message.totalPoint', { lang }) %></label>
            <p class="font-weight-bold"> <%= totalPoint %> </p>
          </div>

          <div class="attr">
            <label><%= t('message.totalFarm', { lang }) %></label>
            <p class="font-weight-bold"> <%= productionPlaces.length %> </p>
          </div>

          <div class="attr">
            <label><%= t('message.totalArea', { lang }) %> (ha)</label>
            <p class="font-weight-bold"> <%= totalArea %> </p>
          </div>
        </div>

        <div class="data-section-row d-flex mb-20">
          <div class="attr flex-basic">
            <label><%= t('message.deforestation.totalDeforestationAssessment', { lang }) %></label>
            <p class="font-weight-bold"> <%=  diligenceReportAssessmentLength %> </p>
          </div>

          <div class="attr flex-basic">
            <label><%= t('message.deforestation.totalHighFarms', { lang }) %></label>
            <p class="font-weight-bold"> <%= totalHighDeforestationCount %> </p>
          </div>

          <div class="attr flex-basic">
            <label><%= t('message.deforestation.totalRiskAssessment', { lang }) %></label>
            <p class="font-weight-bold"> <%=  report.diligenceReportAssessment.length %> </p>
          </div>
        </div>
      </div>



      <div class="third-section p-20 mb-50">
        <h4><%= t('message.productDetail', { lang }) %></h4>
        <div class="data-section-row d-flex mb-20 space-between">
          <div class="attr">
            <label><%= t('message.productName', { lang }) %></label>
            <p class="font-weight-bold"> <%= report.product_detail.name %> </p>
          </div>

          <div class="attr">
            <label><%= t('message.productDesc', { lang }) %></label>
            <p class="font-weight-bold"> <%= report.productDescription %> </p>
          </div>

          <div class="attr">
            <label><%= t('message.netMass', { lang }) %> (KG)</label>
            <p class="font-weight-bold"> <%= report.productNetMass %> </p>
          </div>

          <div class="attr">
            <label><%= t('message.volume', { lang }) %> (m3)</label>
            <p class="font-weight-bold"> <%= report.productVolume %> </p>
          </div>
        </div>

        <div class="data-section-row d-flex mb-20">
          <div class="attr flex-basic">
            <label><%= t('message.scientificName', { lang }) %></label>
            <p class="font-weight-bold"> <%= report.productScientificName %> </p>
          </div>

          <div class="attr flex-basic">
            <label><%= t('message.commanName', { lang }) %></label>
            <p class="font-weight-bold"> <%= report.productCommonName %> </p>
          </div>
        </div>
      </div>

      <div class="forth-section p-20 mb-50 production-place">
        <h4 class="mb-20"><%= t('message.deforestation.productionPlace', { lang }) %></h4>
        <div>
          <table id="production places" class="table table-striped table-bordered" style="width:100%">
            <thead>
              <tr>
                <th><%= t('message.deforestation.productionPlaceAndFarmId', { lang }) %></th>
                <th><%= t('message.deforestation.producerName', { lang }) %></th>
                <th><%= t('message.deforestation.addressOfProduction', { lang }) %></th>
                <th><%= t('message.area', { lang }) %> (ha)</th>
                <th><%= t('message.type', { lang }) %></th>
                <th><%= t('message.deforestation.eudrDeforestationStatus', { lang }) %></th>
                <th><%= t('message.deforestation.riskAssessment', { lang }) %></th>
              </tr>
            </thead>
            <tbody>
              <% if(productionPlaces.length){ %>
                <% for(const production of productionPlaces) { %>  
                  <tr>
                    <td><%= production.farm.farmName %> <%= production.id %></td>
                    <td> <%= production.farm.userDdsAssoc ? (production.farm.userDdsAssoc.firstName +' '+ production.farm.userDdsAssoc.lastName) : 'N/A' %>   </td>
                    <td> <%= production.farm.address %> </td>
                    <td> <%= production.farm.area ? (production.farm.area/2.471).toFixed(2) : 'N/A'  %>  </td>
                    <td> <%= production.farmType ? t('message.' + production.farmType.toLowerCase(), { lang }) : '' %> </td>
                    <td>

                      <%  if(
                        production.eudr_deforestation_status == 'Very High Probability' || 
                        production.eudr_deforestation_status == 'High Deforestation Probability'
                        ){ %> 
                        <div class="tick-sign production-status-high"></div>
                      <% } else if(
                        production.eudr_deforestation_status == 'Medium Probability' || 
                        production.eudr_deforestation_status == 'Medium Deforestation Probability'
                        ) { %>  
                        <div class="tick-sign production-status-medium"></div>
                     <% } else if(
                      production.eudr_deforestation_status == 'Low Probability' ||
                      production.eudr_deforestation_status == 'Very Low Probability' ||
                      production.eudr_deforestation_status == 'Zero/Negligible Probability'
                     ) {  %> 
                      <div class="tick-sign production-status-low"></div>
                      <%} %>
                        <%= production.eudr_deforestation_status ? t('message.' + production.eudr_deforestation_status, { lang }) : '' %>
                    </td>



                    <td> 

                      <% if(production.risk_assessment_status) { %>

                      <%  if(production.risk_assessment_status == 'approved'){ %> 
                        <div class="tick-sign production-status-approve"></div>
                      <% }else { %>  
                        <div class="tick-sign production-status-reject"></div>
                     <% }  %>  
                      <%= t('message.' + production.risk_assessment_status, { lang }) %>
                      <% } %>
                    </td>
                  </tr>
                <% } %>
              <% } else { %>
                <tr>
                  <td colspan="7"><%= t('message.noRecordFound', { lang }) %></td>
                </tr>
              <%} %>

            </tbody>
          </table>
        </div>
      </div>

      <div class="forth-section p-20 mb-50 production-place">
        <h4 class="mb-20"><%= t('message.farmsRemovedFromList', { lang }) %></h4>
        <div>
          <table id="production places" class="table table-striped table-bordered" style="width:100%">
            <thead>
              <tr>
                <th><%= t('message.deforestation.productionPlaceAndFarmId', { lang }) %></th>
                <th><%= t('message.deforestation.producerName', { lang }) %></th>
                <th><%= t('message.deforestation.addressOfProduction', { lang }) %></th>
                <th><%= t('message.area', { lang }) %> (ha)</th>
                <th><%= t('message.type', { lang }) %></th>
                <th><%= t('message.deforestation.eudrDeforestationStatus', { lang }) %></th>
                <th><%= t('message.deforestation.riskAssessment', { lang }) %></th>
              </tr>
            </thead>
            <tbody>
              <tbody>
                <% if(removedProductionPlaces.length){ %>
                  <% for(const production of removedProductionPlaces) { %>  
                    <tr>
                      <td><%= production.farm.farmName %> <%= production.id %></td>
                      <td> <%= production.farm.userDdsAssoc ? (production.farm.userDdsAssoc.firstName +' '+ production.farm.userDdsAssoc.lastName) : 'N/A' %>  </td>
                      <td> <%= production.farm.address %> </td>
                      <td> <%= production.farm.area ? (production.farm.area/2.471).toFixed(2) : 'N/A' %>  </td>
                      <td> <%= production.farmType ? t('message.' + production.farmType.toLowerCase(), { lang }) : '' %> </td>
                      <td><%= production.eudr_deforestation_status ? t('message.' + production.eudr_deforestation_status, { lang }) : '' %></td>
                      <td> <%= production.risk_assessment_status ? t('message.' + production.risk_assessment_status, { lang }) : '' %> </td>
                    </tr>
                  <% } %>
                <% } else { %>
                  <tr>
                    <td colspan="7"><%= t('message.noRecordFound', { lang }) %></td>
                  </tr>
                  <%} %>
  
              </tbody>
            </tbody>
          </table>
        </div>
      </div>


      <div class="forth-section p-20 production-place">
      <% if(declarations.length) { %>
        <h4 class="mb-20"><%= t('message.deforestation.declarationStatement', { lang }) %></h4>
        <% for(dec of declarations) { %>
          <div>
            <input type="checkbox" checked> &nbsp;  <%= dec %>
          </div>
        <%} %>
        <% } %>
      </div>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
      crossorigin="anonymous"></script>
  </section>
</body>

</html>