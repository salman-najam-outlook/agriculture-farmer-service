<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DDS Metrics Report</title>
  <style>
    body {
      font-family: Arial, Helvetica, sans-serif;
      line-height: 1.6;
      font-size: 16px;
      color: #333;
      max-width: 800px;
      margin: 20px auto;
      padding: 20px;
    }
  </style>
</head>

<body>
  <header>
    <h2>DDS Usage Monthly Report for the month of <%= month %> <%= year %></h2>
  </header>

  <h3>List of countries included in the report:</h3>
  <ul>
    <% countries.forEach(country => { %>
      <li><%= country %></li>
    <% }); %>
  </ul>

  <h3>Summary of Key Metrics:</h3>
  <ul>
    <li>Total number of DDS reports: <%= totalReports %></li>
    <li>Total Product Net Mass: <%= totalProductNetMass %> kg</li>
  </ul>

  <% if(totalReports > 0) { %>

  <h3>Summary by Country:</h3>
  <table border="1" cellpadding="10" cellspacing="0">
    <thead>
      <tr>
        <th>Country</th>
        <th>Number of Reports</th>
        <th>Total Product Net Mass (kg)</th>
      </tr>
    </thead>
    <tbody>
      <% for(const [country, metrics] of Object.entries(metricsByCountry)) { %>
        <tr>
          <td><%= country %></td>
          <td align="right"><%= metrics.diligenceReports.length %></td>
          <td align="right"><%= metrics.totalProductNetMass %></td>
        </tr>
      <% } %>
    </tbody>
  </table>

  <p>
    Please find attached the CSV file containing the detailed report of DDS Usage. The report includes information about each DDS reports.
  </p>
  <% } else { %>
  <p>No DDS reports were generated in the specified month.</p>
  <% } %>
</body>

</html>